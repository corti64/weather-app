window.tracking={trackers:[GoogleAnalyticsTracker={event:function(e){_gaq.push(["_trackEvent",e.category,e.action,e.label,e.value,e.noninteraction||!1])},page:function(e){_gaq.push(["_trackPageview",e.url])},transaction:function(e){var t={id:$.generateHash(32),products:[],designer:"",total:0,tax:0,shipping:0,geo:{city:"N/A",state:"N/A",country:"N/A"}},o=$.extend(t,e);_gaq.push(["_addTrans",o.id,o.designer,o.total,o.tax,o.shipping,o.geo.city,o.geo.state,o.geo.country]),e.products.forEach(function(e){_gaq.push(["_addItem",o.id,e.id,e.name,e.type,e.price,e.quantity||1])}),_gaq.push(["_trackTrans"])}}],track:function(t,o){o?this.trackers.forEach(function(e){"function"==typeof e[t]&&e[t](o)}):console.warn("No tracking data provided.")}},$(function(){$.notify=function(e){if(e.message){var t=$.extend({id:$.generateHash(8),delay:4e3,type:"information",autohide:!0,position:"top center"},e);"title"in e&&e.title||(t.title=t.type);var o=templates.render("partials/_notify.html",t);$("#notify").length||$("<div/>",{id:"notify",class:t.position}).appendTo("body"),$(o).appendTo("#notify"),$("#toast-"+t.id).toast("show")}}}),$(function(){$.generateHash=function(e){var t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";e=e||8;for(var n=0;n<e;n++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}}),window.filters={dateformat:function(e,t){return dayjs(e).format(t.format||"LL")},priceformat:function(e,t){return t=t||"USD",currency_symbols={USD:"$",EUR:"&euro;"},symbol=currency_symbols[t]||t,symbol+e.toFixed(2)},filesizeformat:function(e,t){var a=t?1024:1e3,i=parseFloat(e);return 1===i?"1 Byte":i<a?i+" Bytes":["Bytes",t?"KiB":"kB",t?"MiB":"MB",t?"GiB":"GB",t?"TiB":"TB",t?"PiB":"PB",t?"EiB":"EB",t?"ZiB":"ZB",t?"YiB":"YB"].reduce(function(e,t,o){var n=Math.pow(a,o);return n<=i?(i/n).toFixed(1)+" "+t:e})},intcomma:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},sum:function(e,t){var o=0;return e.forEach(function(e){o+=e[t.attribute]}),o},title:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},pluralize:function(e){return 1!=e?"s":""}},$(function(){window.templates=new nunjucks.Environment,$.each(window.filters,function(e,t){templates.addFilter(e,t,!0)})}),$(function(){$.ajaxSetup({beforeSend:function(e,t){var o,n,a,i;i=t.type,/^(GET|HEAD|OPTIONS|TRACE)$/i.test(i)||(o=t.url,n="//"+document.location.host,a=document.location.protocol+n,o!=a&&o.slice(0,a.length+1)!=a+"/"&&o!=n&&o.slice(0,n.length+1)!=n+"/"&&/^(\/\/|http:|https:).*/.test(o))||e.setRequestHeader("X-CSRFToken",Cookies.get("csrftoken"))}}),$(document).ajaxError(function(e,t,o,n){"abort"!==n&&Sentry.captureMessage(n||t.statusText,{extra:{type:o.type,url:o.url,data:o.data,status:t.status,error:n||t.statusText,response:t.responseText}})})}),$(function(){$(".autocomplete").each(function(){var i=$(this),r=i.parents("form"),o=i.outerHeight(),a={settings:{expires:7,key:i.data("history")},get:function(t){var e=[];if(this.settings.key){var o=Cookies.get(this.settings.key);o&&(e=JSON.parse(o))}return t&&0<t.length&&(e=_.filter(e,function(e){return 0===e.value.lastIndexOf(t,0)})),e},set:function(e){Cookies.set(this.settings.key,e,{expires:this.settings.expires})}},n={url:i.data("url"),render:function(e){if(this.remove(),0<e.length){var t=templates.render("search/_suggestions.html",{input:$.trim(i.val()).toLowerCase(),suggestions:e.slice(0,6)});r.addClass("has-dropdown").append(t),r.find(".suggestions").css("top",o)}},remove:function(){r.removeClass("has-dropdown").find(".suggestions").remove()}};i.on("focus blur",function(e){var t="focus"==e.type||"click"==e.type;if($(e.relatedTarget).parents("form").is(r))return!1;r.toggleClass("focus",t),t||n.remove()}),i.on("click",function(){var e=$.trim(i.val()),t=a.get(e);n.render(t)}),r.on("mouseenter mouseleave",".suggestions-list .list-group-item-action",function(e){var t=$(this),o="mouseenter"==e.type;t.siblings().removeClass("selected"),t.toggleClass("selected",o)}),i.on("keydown",function(e){if(13==e.which){var t=r.find(".suggestions-list .selected");0<t.length&&(t.trigger("click"),e.preventDefault(),e.stopImmediatePropagation())}}),i.on("keydown",function(e){8==e.which&&($.trim(i.val()).length||r.find(".input-group-prepend.filter-list [data-filter]:last").trigger("click"))}),i.on("keyup",function(e){if(38==e.which||40==e.which){var t=r.find(".suggestions");if(0<t.length){var o,n=t.find("[data-value]"),a=n.filter(".selected");38==e.which&&(o=0<a.length&&0<a.prev().length?a.prev():n.last()),40==e.which&&(o=0<a.length&&0<a.next().length?a.next():n.first()),o.addClass("selected"),a.removeClass("selected")}else i.trigger("click");e.stopImmediatePropagation()}}),i.on("keydown keyup",function(e){38!=e.which&&40!=e.which||e.preventDefault()}),i.on("keyup",_.throttle(function(e){var t=$.trim(i.val()),o=a.get(t);if(!(0<=$.inArray(e.key,["Shift","Alt","Control","Meta"]))){if(n.url&&t.length){if(t==i.data("value"))return;$.getJSON(n.url,{q:t},function(e){var t=$.map(e,function(e){return"string"==typeof e&&(e={q:e,value:e}),e});t=_.union(o,t),t=_.uniq(t,function(e){return e.value}),n.render(t.slice(0,8))})}else n.render(o);i.data("value",t)}},200)),r.on("submit",function(){r.addClass("submitted"),n.remove()}),r.on("submit",function(e){var t=$.trim(i.val()),o=a.get();t.length<2||(o.unshift({type:"history",value:t}),o=o.slice(0,12),o=_.uniq(o,function(e){return e.value}),a.set(o))}),r.on("click","[data-remove-history]",function(e){var t=$(this),o=t.data("remove-history"),n=a.get();return n&&(n=_.filter(n,function(e){return e.value!=o}),t.parents(".list-group-item").remove(),a.set(n),i.trigger("focus").trigger("click")),!1}),r.on("click","[data-value]",function(e){e.preventDefault();var t=$(this).data("value");r.find('input[name="q"]').val(t),r.submit()})})}),$(function(){if($.extend(FormSerializer.patterns,{validate:/^[a-z][a-z0-9_-]*(?:\[(?:\d*|[a-z0-9_-]+)\])*$/i,key:/[a-z0-9_-]+|(?=\[\])/gi,named:/^[a-z0-9_-]+$/i}),$(document).on("click",'[data-toggle="toggle"]',function(e){e.preventDefault();var t=$(this),o=t.data("target")||t.attr("href");$(o).toggleClass("d-none")}),$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover(),$(document).on("click",'.popover [data-dismiss="popover"]',function(){$(this).parents(".popover").popover("hide")}),$(document).on("mouseenter","[data-license]",function(){var t=$(this);if(!($(window).width()<600)){var e=setTimeout(function(){var e=templates.render("licenses/_summary.html",{name:t.data("license")});0<e.length&&t.popover({content:e,html:!0,sanitize:!1,delay:{show:1e3},trigger:"hover",placement:"bottom"}).popover("show")},500);t.on("mouseleave",function(){clearTimeout(e)})}}),$(document).on("click","[data-confirm]",function(e){var t=confirm($(this).data("confirm"));return t||e.stopImmediatePropagation(),t}),$(document).on("click",'[data-toggle="tooltip"]',function(){$(this).tooltip("hide")}),$(document).on("shown.bs.collapse",".collapse",function(){$(this).find("[autofocus]").trigger("focus")}),$(".background-picker").on("click","a",function(e){e.preventDefault();var t=$(this),o=t.parents(".background-picker"),n=t.data("value");o.find(".active").removeClass("active"),t.addClass("active"),$("body").removeClass("preview-white preview-black preview-gray preview-transparent").addClass("preview-"+n),"undefined"!=typeof USER&&Cookies.set("icon-preview-color",n)}),$(document).on("click",'[href="/user/logout"]',function(){Intercom("shutdown")}),Cookies.getJSON("flash-message")&&($.notify(Cookies.getJSON("flash-message")),Cookies.remove("flash-message")),$(document).on("click","[data-tracking]",function(){var e=$(this).data("tracking").split("|");e.length<2||tracking.track("event",{category:e[0],action:e[1],label:e[2]||null,value:e[3]||null})}),"true"==$.url().param("trackevent")){var e=$.url().param();tracking.track("event",{category:e.event_category,action:e.event_action,label:e.event_label,value:e.event_value})}$.fn.hotkey=function(){return this.each(function(){var e=$(this),t=e.data("hotkey");$(document).on("keyup",null,String(t),function(){e.trigger("focus").trigger("click"),"a"===e.prop("tagName").toLowerCase()&&(window.location=e.attr("href"))})})},$("[data-hotkey]").hotkey(),$(document).on("change","input[data-group]",function(){var e=$(this),t=e.data("group"),o=$('input[data-group="'+t+'"]');"checkall"==e.data("toggle")&&o.prop("checked",e.is(":checked"));var n=0===o.filter(":checked").length;$('button[data-group="'+t+'"]').attr("disabled",n)}),$(document).on("change",".select-navigation",function(){var e=$(this).val();window.location.replace(e)}),$(".filter-list").on("click","[data-filter]",function(e){e.preventDefault();var t=$(this),o=t.data("filter");$(".search-form").find('[name="'+o+'"]').remove(),t.tooltip("dispose").remove(),Cookies.remove(o)}),$("#billing-interval").on("change",function(){$("[data-interval]").toggleClass("d-none")}),$.confirmPayment=function(e,t){t=t||$.noop(),$("body").loading(!0,{title:"Authenticating",description:"Please wait..."}),tracking.track("event",{category:"Commerce",action:"Payment confirmation (3D secure)",label:"Requested"}),stripe.handleCardPayment(e).then(function(e){$("body").loading(!1),e.error?($.notify({type:"danger",message:e.error.message,autohide:!1}),tracking.track("event",{category:"Commerce",action:"Payment confirmation (3D secure)",label:"Error",value:e.error.message})):(t(e),tracking.track("event",{category:"Commerce",action:"Payment confirmation (3D secure)",label:"Confirmed"}))})},$("[data-countdown]").each(function(){var n=$(this),a=n.data("countdown");a&&(a=dayjs.utc(a),setInterval(function(){var e=dayjs.utc(),t=dayjs.utc(a.diff(e)),o={day:a.diff(e,"day"),hour:t.format("HH"),minute:t.format("mm"),second:t.format("ss"),total:a.diff(e,"hour")+t.format(":mm:ss")};$.each(o,function(e,t){n.find("."+e).text(t)})},1e3))}),$(document).on("click","[data-link]",function(e){var t=$(e.target);if(!t.is("a")&&!t.is("button")&&!getSelection().toString()){var o=$(this).data("link");e.ctrlKey||e.metaKey?window.open(o,"_blank"):location.href=o}}),$.fn.formatJSON=function(){return this.each(function(e,t){var o=$(t),n=$.trim(o.val());n&&o.val(JSON.stringify(JSON.parse(n),void 0,4))})},$(".pretty-json").formatJSON(),$(document).on("change","[data-setting]",function(){var e=$(this),t=e.data("setting");e.is(":checked")?Cookies.set(t,"true"):Cookies.remove(t)})}),$(function(){$.fn.loading=function(e,t){if($(".loading-overlay").remove(),e){var o=$.extend({animation:!0,title:"Loading, please wait..."},t),n=templates.render("partials/_loading.html",o);this.append(n),$(".tooltip").tooltip("hide")}}}),$(function(){$(document).on("click",'[data-requires="user"]',function(e){var t=$(this);if("undefined"==typeof USER){e.preventDefault(),e.stopImmediatePropagation();var o={},n=t.attr("href");n&&"#"!==n&&(o.redirect=n),renderModal("signup/_modal",o)}}),$(document).on("keydown","#login-form",function(e){13==e.keyCode&&$(this).submit()}),$(document).on("form.submit.success","#login-form",function(e){tracking.track("event",{category:"User",action:"Log in",label:"Logged in successfully"}),tracking.track("page",{url:"/user/login/success"})}),$(document).on("form.submit.error","#login-form",function(e,t){var o=$(this);tracking.track("event",{category:"User",action:"Log in",label:"Error"}),o.parents(".modal-content").loading(!1),t&&t.errors&&"g-recaptcha-response"in t.errors&&(o.find("#recaptcha-holder").recaptcha(t),e.stopImmediatePropagation())}),$(document).on("form.submit.success","#signup-form",function(e){tracking.track("event",{category:"User",action:"Sign up",label:"Signed up successfully"}),tracking.track("page",{url:"/user/signup/success"})}),$(document).on("form.submit.error","#signup-form",function(e,t){var o=$(this);o.parents(".modal-content").loading(!1),tracking.track("event",{category:"User",action:"Sign up",label:"Error"}),t&&t.errors&&"g-recaptcha-response"in t.errors&&(o.find("#recaptcha-holder").recaptcha(t),e.stopImmediatePropagation())}),$.loadFacebookSDK=function(e){e=e||$.noop(),$.getScript("https://connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:window.FACEBOOK_APP_ID,xfbml:!0,version:"v2.8"}),e()})},$(document).on("click",'[data-toggle="facebook"]',function(){$.loadFacebookSDK(function(){FB.login(function(e){if(e.authResponse){var o={access_token:e.authResponse.accessToken};FB.api("/me",{fields:"first_name, last_name, email"},function(e){$.extend(o,e),$.ajax({url:"/user/ajax/login/facebook",method:"POST",data:o,success:function(e){tracking.track("event",{category:"User",action:"Connect with Facebook",label:"Successful"}),location.reload()},error:function(e){var t=e.responseJSON;"code"in t&&"missing_user_data"==t.code?(tracking.track("event",{category:"User",action:"Connect with Facebook",label:"Require data"}),renderModal("signup/_missing-details",$.extend(t.additional_data,o))):tracking.track("event",{category:"User",action:"Connect with Facebook",label:"Failed"})}})})}else tracking.track("event",{category:"User",action:"Connect with Facebook",label:"Cancelled"})},{scope:"public_profile,email"})})})}),$(function(){$.fn.recaptcha=function(e){var t=templates.render("partials/_recaptcha.html",e);this.html(t)},$(document).on("submit","form.needs-validation",function(e){var t=e.currentTarget,o=t.checkValidity();$(t).addClass("was-validated"),$(t).removeClass("server-validated"),$(t).find(".invalid-feedback.added").remove(),o||(e.preventDefault(),e.stopImmediatePropagation())}),$(document).on("click",'[data-toggle="submit"]',function(){var e=$(this);$(e.data("target")).submit()}),$(document).on("submit",'form[data-submit="ajax"]',function(e){e.preventDefault();var t=$(this);$.ajax({url:t.attr("action"),method:t.attr("method"),data:t.serializeObject(),success:function(e){t.trigger("form.submit.success",e)},error:function(e){t.trigger("form.submit.error",e.responseJSON)},complete:function(e){t.trigger("form.submit.complete",e.responseJSON)}})}),$(document).on("form.submit.success",'form[data-submit="ajax"]',function(e){var t=$(this),o={type:"success",title:t.data("success-title"),message:t.data("success-message")};switch(t.data("success")){case"reload":Cookies.set("flash-message",o),location.reload();break;case"redirect":Cookies.set("flash-message",o),location.replace(t.data("success-url"));break;default:$.notify(o)}}),$(document).on("form.submit.error",'form[data-submit="ajax"]',function(e,t){var n=$(this),o={type:"danger",title:n.data("error-title"),message:n.data("error-message")||"Something went wrong"};t&&("message"in t&&(o.message=t.message),"errors"in t&&(n.removeClass("was-validated").addClass("server-validated"),$.each(t.errors,function(e,t){var o=n.find("[name="+e+"]");o.parent().find(".invalid-feedback.added").remove(),o.addClass("is-invalid").after('<div class="invalid-feedback added">'+t+"</div>")}))),$.notify(o)}),$(document).on("change",'[data-autosubmit="true"]',function(){$(this).parents("form").submit()})}),$(function(){$(document).on("click","[data-remote]",function(e){e.preventDefault();var t=$(this),o=t.data(),n=$("body");t.parents(".modal-content").length&&(n=t.parents(".modal-content"));var a=setTimeout(function(){n.loading(!0,{title:o.loadingTitle})},200);$.ajax({url:o.remote,method:o.method||"GET",data:_.omit(o,["modal","toggle","remote","method","confirm","loadingTitle","success","successTitle","error","errorTitle","bs.tooltip"]),success:function(e){t.trigger("remote.call.success",e)},error:function(e){t.trigger("remote.call.error",e)},complete:function(){clearTimeout(a),n.loading(!1)}})}),$(document).on("remote.call.success","[data-remote]",function(e,t){var o=$(this).data(),n={type:"success",title:o.successTitle,message:t.message||o.successMessage};o.success&&("dismiss"==o.success?$.notify(n):(Cookies.set("flash-message",n),"reload"==o.success?location.reload():location.replace(o.success)))}),$(document).on("remote.call.error","[data-remote]",function(e,t){var o=$(this).data();"responseJSON"in t&&(t=t.responseJSON);var n={type:"danger",title:o.errorTitle,message:t.message||o.errorMessage||"Failed loading remote data"};$(this).parents().has(".loading-overlay").loading(!1),$.notify(n)})}),$(function(){$(".navbar").each(function(){var e=$(this).offset().top,t=$('[data-toggle="navigation-sticky"]');t.length&&(e=t.offset().top+t.outerHeight(),$("body").addClass("nav-fade")),$(window).on("load scroll",function(){$("body").toggleClass("nav-fixed",$(window).scrollTop()>=e)})}),$("#attention-needed").each(function(){var e=$(this),t=Base64.encode(e.data("hash"));e.find("a").on("click",function(e){e.preventDefault()}),e.popover({content:$("#attention-needed-content").html(),html:!0,animation:!1,placement:"bottom",sanitize:!1,template:$("#attention-needed-template").html()}),e.on("shown.bs.popover",function(){$(".nav-link").tooltip("hide"),$('[data-toggle="upgrade-prompt"]').on("remote.call.error",function(e,t){"responseJSON"in t&&"no_more_downloads_available"==t.responseJSON.code&&($(document).trigger("pro.upgrade.prompt",t.responseJSON),e.stopImmediatePropagation())}),$("#cart-preview-dropdown").one("show.bs.collapse",function(){e.popover("hide")}),$(document).one("show.bs.dropdown",function(){e.popover("hide")})}),$(window).on("load",function(){Cookies.get("needs_attention")!=t&&(e.trigger("click"),Cookies.set("needs_attention",t,{expires:7}))})})}),$(function(){$(document).on("shown.bs.modal",".modal",function(){var e=$(this);e.find("[autofocus]").trigger("focus"),e.find('[data-toggle="tooltip"]').tooltip(),e.find('[data-toggle="popover"]').popover()}),$(document).on("shown.bs.modal",".modal",function(){var e=$(this),t=e.find("#modal-title").text();tracking.track("page",{url:"/modal/"+t}),e.on("click",'[data-action="confirm"]',function(){tracking.track("event",{category:"Modal",action:t,label:"Confirm"})}),e.on("click",'[data-dismiss="modal"]',function(){tracking.track("event",{category:"Modal",action:t,label:"Cancel"})})}),$(document).on("hidden.bs.modal",".modal.rendered",function(){$(this).remove()}),$(document).on("hide.bs.modal",'.modal[data-dismiss="reload"]',function(){location.reload()}),$(document).on("submit",'.modal [data-submit="ajax"]',function(e){var t=$(this);t.parents(".modal-content").loading(!0,{title:t.data("loading-title"),description:t.data("loading-description")})}),$(document).on("form.submit.error",'.modal [data-submit="ajax"]',function(e){$(this).parents(".modal-content").loading(!1)}),$(document).on("form.submit.complete",'.modal [data-submit="ajax"]',function(){"reload"!=$(this).data().success&&$(this).find(".modal-content").loading(!1)}),$(document).on("form.submit.success remote.call.success",'.modal [data-success="dismiss"]',function(){$(this).parents(".modal").modal("hide")}),$(document).on("click","[data-modal]",function(e){e.preventDefault();var o=$(this).data();o.remote?$(this).one("remote.call.success",function(e,t){renderModal(o.modal,$.extend({},o,t))}):renderModal(o.modal,o)}),window.renderModal=function(e,t){var o=templates.render(e+".html",t);$(".modal").modal("hide"),$(o).modal("show"),$(document).trigger("modal.render",{modal:e})}}),$(function(){$(document).on("remote.call.success","[data-cart]",function(e,t){if(e.preventDefault(),t){var o=$('[data-counter="cart_items"]'),n=0===t.cart.cart_items.length;o.text(t.cart.cart_items.length),o.parents(".nav-item").toggleClass("d-none",n),n&&$("#cart-preview-dropdown").collapse("hide");var a=templates.render("cart/_dropdown.html",t);$("#cart-preview-dropdown").html(a),0===$(this).parents(".cart-preview").length&&$("#cart-preview-dropdown").collapse("show"),$(document).trigger("cart.updated",t)}}),$("#cart-preview-dropdown").on("show.bs.collapse",function(){0<$(this).find(".loading").length&&$.ajax({url:"/commerce/ajax/cart/",success:function(e){var t=templates.render("cart/_dropdown.html",e);$("#cart-preview-dropdown").html(t)},error:function(e){$("#cart-preview-dropdown").collapse("hide"),$.notify({type:"danger",title:"Something went wrong",message:"Please try again"})}}),tracking.track("page",{url:"commerce/cart"}),$(document).one("click",function(e){0===$(e.target).parents("#cart-preview-dropdown").length&&$("#cart-preview-dropdown").collapse("hide")}),$(".navbar-nav .dropdown").one("show.bs.dropdown",function(){$("#cart-preview-dropdown").collapse("hide")})})}),$(function(){$(document).on("show.bs.tab",'[data-toggle="tab"][href^="#png-"]',function(){var e=$(this).attr("href").replace("#png-","");$("#preview-image img").width(e)}),$(document).on("show.bs.tab",'[data-toggle="tab"][href^="#other"]',function(){var e=$('#other [data-toggle="tab"]');e.find(".active").length||e.first().tab("show")}),$(document).on("click",'[data-action="editor"]',function(){Intercom("trackEvent","icon-opened-in-editor")}),$(document).on("shown.bs.modal","#flag-modal",function(){$('#flag-icon-form [name="url"]').val(window.location.href)}),$(document).on("submit","#flag-icon-form",function(){tracking.track("event",{category:"Icons",action:"Flag",label:"Icon flagged"}),Intercom("trackEvent","icon-reported")})}),$(function(){var d=function(e,t){var o=t?"check-download":"download",n=["",e.assetType+"s",e.assetId,o,e.assetFormat];return!t&&"size"in e&&n.push(e.size),n.join("/")};$(document).on("download",function(e,t){var o=window.downloadTarget||t.downloadTarget;if(o){var c=$.extend({assetType:"icon",assetId:o.data("asset-id"),assetFormat:Cookies.get("last_download_format")||"png",size:Cookies.get("last_download_size")||256},t);$.ajax({url:d(c,!0),success:function(e){var t=e.is_premium,o={type:"success",title:"Downloading "+(t?"premium":"free")+" "+c.assetType,message:"Please read the license information.",position:"bottom left"};if(t&&"undefined"!=typeof USER&&USER.pro_subscription_usable){var n=-1<e.pro_downloaded_icon_ids_in_period.indexOf(c.assetId),a=$("#nav-downloads-counter").data();if(o.message="The "+c.assetType+" is downloaded under Basic license.",!n&&0<a.downloads_count){a.downloads_count--,o.message+=" You have "+a.downloads_count+" premium download"+filters.pluralize(a.downloads_count)+" left.";var i=templates.render("partials/_pro-counter.html",a);$("#nav-downloads-counter").replaceWith(i),$("#nav-downloads-counter").tooltip()}}if("icon"==c.assetType&&(o.tip="Use the <kbd>"+("svg"==c.assetFormat?"S":"P")+"</kbd> key when you hover an icon to download in "+c.assetFormat.toUpperCase()+"."),c.base64){if("svg"==c.assetFormat)$.ajax({url:d(c),dataType:"text",success:function(e){s("data:image/svg+xml;base64,"+Base64.encode(e))}});else{var r=new Image;r.src=d(c),r.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0),s(e.toDataURL("image/"+c.assetFormat))}}var s=function(e){renderModal("icons/_base64",{format:c.assetFormat.toUpperCase(),datauri:e}),$("body").loading(!1)}}else location.href=d(c),$.notify(o);Cookies.set("last_download_format",c.assetFormat),"size"in c&&Cookies.set("last_download_size",c.size),tracking.track("event",{category:filters.title(c.assetType),action:"Download",label:c.assetFormat.toLowerCase()}),Intercom("trackEvent","icon-download")},error:function(e){var t="";e.responseJSON&&e.responseJSON.code&&(t=e.responseJSON.code),"no_more_downloads_available"==t?$(document).trigger("pro.upgrade.prompt",e.responseJSON):"download_limit_reached"==t?(renderModal("limiter/_limit-reached",e.responseJSON),tracking.track("event",{category:"User",action:"Premium download limit",label:"Limit reached"})):"registration_required"==t?(renderModal("limiter/_signup-prompt"),tracking.track("event",{category:"User",action:"Free download limit",label:"Limit reached"})):"pro_subscription_required"==t?(renderModal("limiter/_subscription-required"),tracking.track("event",{category:"User",action:"Pro subscription required",label:c.assetFormat})):$.notify({type:"danger",title:"Something went wrong",message:"Please try again or reload the page."})}})}}),$(document).on("click",'[data-action="download"]',function(e){e.preventDefault();var t=$(this),o=t.data();o.downloadTarget=t,$(document).trigger("download",o)}),$(document).on("keydown",null,"d",function(){$(document).trigger("download")}),$(document).on("keydown",null,"s",function(){$(document).trigger("download",{assetFormat:"svg"})}),$(document).on("keydown",null,"p",function(){$(document).trigger("download",{assetFormat:"png"})}),$(document).on("mouseenter",".icon-preview, #icon-details-preview",function(){window.downloadTarget=$(this)}).on("mouseleave",".icon-preview, #icon-details-preview",function(){window.downloadTarget=null}),$(document).on("download",function(){var e=window.downloadTarget;e&&e.is(".icon-preview")&&(e.addClass("highlight"),setTimeout(function(){e.removeClass("highlight")},500))})}),$(function(){$("#prepayment-form").on("change",'[name="predefined"]',function(){var e=$(this),t=e.val(),o=e.parents("form"),n=$("#custom-amount");""===t?n.collapse("show"):n.collapse("hide"),o.removeClass("was-validated"),o.find('input[name="amount"]').val(t)}),$("#prepayment-form").on("submit",function(){var e=$(this),t=e.find('[name="amount"]'),o=parseFloat(t.val()).toFixed(2),n=100*o;e.find('[name="amount_cents"]').val(n),tracking.track("event",{category:"Commerce",action:"Make prepayment",label:"Amount",value:o})})}),$(function(){$(document).on("mouseenter","[data-profile]",function(){var t=$(this),e=t.data("profile");if(!($(window).width()<600)){var o=setTimeout(function(){$.get("/profiles/ajax/"+e+"/summary",function(e){t.popover({trigger:"manual",html:!0,sanitize:!1,content:$(e)[0].innerHTML,template:'<div class="popover popover-profile" style="width: 100%;"><div class="arrow"></div><div class="popover-body p-0"></div></div>'}).popover("show"),$(".popover-profile").on("mouseenter",function(){$(this).addClass("focus")}),$(".popover-profile").on("mouseleave",function(){t.popover("dispose")}),$(document).on("modal.render",function(){t.popover("dispose")}),t.on("mouseleave",function(){setTimeout(function(){$(".popover-profile").hasClass("focus")||t.popover("dispose")},200)})})},500);t.on("mouseleave",function(){clearTimeout(o)})}}),$(document).on("show.bs.popover",function(){$(".popover-profile [autofocus]").focus()}),$(document).on("submit",".popover-profile form",function(e){var t=$(this),o=t.data("designer"),n=(t.find('[name="q"]').val(),t.serializeObject());n.q="designer:"+o+" "+n.q,window.location.href=t.attr("action")+"?"+$.param(n),e.preventDefault()})});
//# sourceMappingURL=https://www.iconfinder.com/static/js/iconfinder.js.map
